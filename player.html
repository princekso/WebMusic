<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ðŸŽ§ Now Playing - Chintu Music</title>
  <link rel="stylesheet" href="assets/css/style.css"/>
</head>
<body>
  <div class="player-container">
    <h1>ðŸŽ¶ Now Playing</h1>
    <img id="songImage" src="" alt="Album Art" class="player-art"/>
    <h2 id="songTitle">Loading...</h2>
    <p id="songArtist"></p>
    <audio id="player" controls autoplay></audio>

    <div style="margin-top: 20px;">
      <a href="index.html">ðŸ”™ Back to Home</a>
    </div>
  </div>

  <script>
  window.onload = function () {
    const audio = document.getElementById("player");
    const title = document.getElementById("songTitle");
    const artist = document.getElementById("songArtist");
    const img = document.getElementById("songImage");

    const stream = localStorage.getItem("audio_url") || "";
    const t = localStorage.getItem("title") || "Unknown Title";
    const a = localStorage.getItem("artist") || "Unknown Artist";
    const i = localStorage.getItem("image") || "";

    title.innerText = t;
    artist.innerText = a;
    img.src = i;
    audio.src = stream;
    audio.load();

    // Try autoplay
    audio.play().catch(e => {
      console.warn("Autoplay blocked:", e);
    });

    // Show audio link for debug
    const info = document.createElement("p");
    info.style = "font-size:0.8rem; word-break:break-all; text-align:center; margin:10px; color:#ccc";
    info.innerText = "ðŸ”— Audio URL:\n" + stream;
    document.body.appendChild(info);
  };
</script>
